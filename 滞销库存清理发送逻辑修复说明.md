# æ»é”€åº“å­˜æ¸…ç†è„šæœ¬å‘é€é€»è¾‘ä¿®å¤è¯´æ˜

## ğŸ“‹ ä¿®å¤å‰çš„é—®é¢˜

### 1. **å‘é€äººé€»è¾‘é—®é¢˜**
- âŒ `get_target_users()` å‡½æ•°å®šä¹‰äº†ä½†ä»æœªä½¿ç”¨
- âŒ å‘é€æ—¶æ²¡æœ‰æŒ‡å®šå…·ä½“ç”¨æˆ·ï¼Œä½¿ç”¨é»˜è®¤å¹¿æ’­
- âŒ å­˜åœ¨é‡å¤ç”¨æˆ·ï¼ˆå¦‚ `yangchao` åœ¨å¤šä¸ªäº‹ä¸šéƒ¨ï¼‰
- âŒ æ²¡æœ‰å»é‡æœºåˆ¶

### 2. **é‡å¤å‘é€é£é™©**
- âŒ æ‰€æœ‰ç”¨æˆ·éƒ½ä¼šæ”¶åˆ°ç›¸åŒçš„æ¶ˆæ¯
- âŒ æ²¡æœ‰ç”¨æˆ·çº§åˆ«çš„å‘é€æ§åˆ¶
- âŒ æ— æ³•è¿½è¸ªæ¯ä¸ªç”¨æˆ·çš„å‘é€çŠ¶æ€

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### 1. **ç”¨æˆ·é…ç½®ç»“æ„**
```python
# å›ºå®šæ”¶ä»¶äººï¼ˆæ‰€æœ‰æŠ¥å‘Šéƒ½ä¼šå‘é€ç»™è¿™äº›äººï¼‰
always_users = ["weicungang", "haozhu"]

# äº‹ä¸šéƒ¨é…ç½®ï¼ˆæ ¹æ®å“ç±»å…³é”®è¯åŒ¹é…ï¼‰
business_groups = {
    "ç©ºè°ƒäº‹ä¸šéƒ¨": {"keywords": ["ç©ºè°ƒ"], "users": ["YangNing", "NingWenBo", "LiuYiWei", "ZhangYuHe","yangchao"]},
    "å†°å†·äº‹ä¸šéƒ¨": {"keywords": ["å†°ç®±","å†·æŸœ"], "users": ["HuShengJie", "WeiCunGang", "JiaWenLong", "yangchao", "lining", "muping","ZhangWangWang"]},
    "æ´—æŠ¤äº‹ä¸šéƒ¨": {"keywords": ["æ´—è¡£æœº"], "users": ["yuaiqin", "WangXiaoLong", "yangchao","lining", "muping","zhaohaoran"]},
    "å¨å«äº‹ä¸šéƒ¨": {"keywords": ["çƒ­æ°´å™¨", "å¨ç”µ", "æ¶ˆæ¯’æŸœ", "ç‡ƒæ°”ç¶", "æ²¹çƒŸæœº", "å‡€æ°´å™¨", "æ´—ç¢—æœº"], "users": ["WangMengMeng", "NianJianHeng", "YangJingBo", "WuXiang"]}
}
```

### 2. **ä¿®å¤åçš„å‘é€é€»è¾‘**

#### **ç”¨æˆ·å»é‡æœºåˆ¶**
```python
# è·å–æ‰€æœ‰ç›¸å…³ç”¨æˆ·å¹¶å»é‡
all_target_users = set(always_users)
for dept, conf in business_groups.items():
    all_target_users.update(conf["users"])

# ç¡®ä¿ç”¨æˆ·åˆ—è¡¨å»é‡
unique_users = list(all_target_users)
```

#### **å•ç‹¬å‘é€ç»™æ¯ä¸ªç”¨æˆ·**
```python
def send_wecomchan_segment(result, target_users=None):
    """å‘é€æ¶ˆæ¯ç»™æŒ‡å®šç”¨æˆ·åˆ—è¡¨ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™å‘é€ç»™æ‰€æœ‰ç›¸å…³ç”¨æˆ·"""
    if target_users is None:
        # è·å–æ‰€æœ‰ç›¸å…³ç”¨æˆ·ï¼ˆå»é‡ï¼‰
        all_users = set(always_users)
        for dept, conf in business_groups.items():
            all_users.update(conf["users"])
        target_users = list(all_users)
    
    # ç¡®ä¿ç”¨æˆ·åˆ—è¡¨å»é‡
    target_users = list(set(target_users))
    
    print(f"ğŸ“¤ å‡†å¤‡å‘é€ç»™ {len(target_users)} ä¸ªç”¨æˆ·: {', '.join(target_users)}")
    
    # ä¸ºæ¯ä¸ªç”¨æˆ·å•ç‹¬å‘é€
    success_count = 0
    for user in target_users:
        success = _send_single_message(result, user)
        if success:
            success_count += 1
        else:
            send_failure_report_to_admin("æ»é”€åº“å­˜æ¸…ç†.py", f"å‘é€ç»™ç”¨æˆ· {user} å¤±è´¥", user)
```

#### **æŒ‡å®šç”¨æˆ·å‘é€**
```python
def _send_single_message(message, to_user=None):
    data = {
        "msg": message,
        "token": token,
    }
    
    # å¦‚æœæŒ‡å®šäº†ç”¨æˆ·ï¼Œæ·»åŠ åˆ°è¯·æ±‚ä¸­
    if to_user:
        data["to_user"] = to_user
        print(f"ğŸ“¤ å‘é€ç»™ç”¨æˆ·: {to_user}")
```

## ğŸ“Š ç”¨æˆ·åˆ—è¡¨åˆ†æ

### **å»é‡åçš„å®Œæ•´ç”¨æˆ·åˆ—è¡¨**
```
å›ºå®šç”¨æˆ·: weicungang, haozhu

ç©ºè°ƒäº‹ä¸šéƒ¨: YangNing, NingWenBo, LiuYiWei, ZhangYuHe, yangchao
å†°å†·äº‹ä¸šéƒ¨: HuShengJie, WeiCunGang, JiaWenLong, yangchao, lining, muping, ZhangWangWang
æ´—æŠ¤äº‹ä¸šéƒ¨: yuaiqin, WangXiaoLong, yangchao, lining, muping, zhaohaoran
å¨å«äº‹ä¸šéƒ¨: WangMengMeng, NianJianHeng, YangJingBo, WuXiang

å»é‡åæ€»ç”¨æˆ·æ•°: 19äºº
é‡å¤ç”¨æˆ·: yangchao (3æ¬¡), lining (2æ¬¡), muping (2æ¬¡)
```

### **å‘é€ç­–ç•¥**
1. **æœˆæŠ¥è„šæœ¬**: å‘é€ç»™æ‰€æœ‰19ä¸ªç”¨æˆ·
2. **æ—¥æŠ¥è„šæœ¬**: å‘é€ç»™æ‰€æœ‰19ä¸ªç”¨æˆ·
3. **æ¯ä¸ªç”¨æˆ·åªæ”¶åˆ°ä¸€æ¬¡æ¶ˆæ¯**ï¼ˆå»é‡ç¡®ä¿ï¼‰
4. **å‘é€å¤±è´¥æ—¶å•ç‹¬æŠ¥å‘Š**ï¼ˆä¸ä¼šå½±å“å…¶ä»–ç”¨æˆ·ï¼‰

## âœ… ä¿®å¤æ•ˆæœ

### **è§£å†³çš„é—®é¢˜**
- âœ… æ¶ˆé™¤äº†é‡å¤å‘é€ç»™åŒä¸€ç”¨æˆ·çš„é£é™©
- âœ… æ­£ç¡®ä½¿ç”¨ç”¨æˆ·é…ç½®é€»è¾‘
- âœ… æ·»åŠ äº†è¯¦ç»†çš„å‘é€æ—¥å¿—
- âœ… å®ç°äº†ç”¨æˆ·çº§åˆ«çš„å‘é€çŠ¶æ€è¿½è¸ª
- âœ… å‘é€å¤±è´¥æ—¶ç²¾ç¡®æŠ¥å‘Šç»™ç®¡ç†å‘˜

### **æ–°å¢åŠŸèƒ½**
- ğŸ“Š å‘é€å‰æ˜¾ç¤ºç›®æ ‡ç”¨æˆ·åˆ—è¡¨
- ğŸ“ˆ å‘é€æˆåŠŸç‡ç»Ÿè®¡
- ğŸ” æ¯ä¸ªç”¨æˆ·çš„å‘é€çŠ¶æ€è¿½è¸ª
- âš ï¸ ç²¾ç¡®çš„å¤±è´¥æŠ¥å‘Šæœºåˆ¶

## ğŸš€ ä½¿ç”¨è¯´æ˜

### **è„šæœ¬æ‰§è¡Œ**
```bash
# æœˆæŠ¥è„šæœ¬
python æ»é”€åº“å­˜æ¸…ç†_æœˆæŠ¥.py

# æ—¥æŠ¥è„šæœ¬  
python æ»é”€åº“å­˜æ¸…ç†.py
```

### **è¾“å‡ºç¤ºä¾‹**
```
ğŸ‘¥ ç›®æ ‡ç”¨æˆ·åˆ—è¡¨: weicungang, haozhu, YangNing, NingWenBo, LiuYiWei, ZhangYuHe, yangchao, HuShengJie, WeiCunGang, JiaWenLong, lining, muping, ZhangWangWang, yuaiqin, WangXiaoLong, zhaohaoran, WangMengMeng, NianJianHeng, YangJingBo, WuXiang
ğŸ“¤ å‡†å¤‡å‘é€ç»™ 19 ä¸ªç”¨æˆ·: weicungang, haozhu, YangNing, NingWenBo, LiuYiWei, ZhangYuHe, yangchao, HuShengJie, WeiCunGang, JiaWenLong, lining, muping, ZhangWangWang, yuaiqin, WangXiaoLong, zhaohaoran, WangMengMeng, NianJianHeng, YangJingBo, WuXiang
ğŸ“¤ å‘é€ç»™ç”¨æˆ·: weicungang
âœ… å‘é€æˆåŠŸ (å°è¯• 1/5)
ğŸ“¤ å‘é€ç»™ç”¨æˆ·: haozhu
âœ… å‘é€æˆåŠŸ (å°è¯• 1/5)
...
âœ… æˆåŠŸå‘é€ç»™ 19/19 ä¸ªç”¨æˆ·
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç”¨æˆ·å»é‡**: ç³»ç»Ÿè‡ªåŠ¨å¤„ç†é‡å¤ç”¨æˆ·ï¼Œç¡®ä¿æ¯äººåªæ”¶åˆ°ä¸€æ¬¡æ¶ˆæ¯
2. **å‘é€å¤±è´¥**: å•ä¸ªç”¨æˆ·å‘é€å¤±è´¥ä¸ä¼šå½±å“å…¶ä»–ç”¨æˆ·
3. **æ—¥å¿—è®°å½•**: æ‰€æœ‰å‘é€æ“ä½œéƒ½æœ‰è¯¦ç»†æ—¥å¿—è®°å½•
4. **å¤±è´¥æŠ¥å‘Š**: å‘é€å¤±è´¥æ—¶ä¼šè‡ªåŠ¨æŠ¥å‘Šç»™ç®¡ç†å‘˜ `weicungang` 